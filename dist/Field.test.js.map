{"version":3,"sources":["../dist-esnext/Field.test.js"],"names":["a","Field","should","before","validFieldConfig","bombs","width","height","invalidFieldConfig","validPos","x","y","invalidPos","initialField","getInitialField","emptyField","getEmptyField","describe","be","an","it","skip","allPositions","map","p","isBomb","equal","length","bombedField","getBombedField","invalidField","not","exist","e","countedField","countNearBombs","flattenField","flatten","isBombeb","pos","bombedPos","find","nearBombebPos","validNearPos","nearBombs","above","closedPosition","newPos","marked1Position","openPosition","opened","true","nearPos","nearPositions","isValid","positionIsValid","false","validateFn","np","validatedpos","markPosition","marked","marked2Position","marked3Position"],"mappings":"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","file":"Field.test.js","sourcesContent":["import chai from 'chai';\nimport * as a from 'chai';\nimport R from 'ramda';\nimport * as Field from './Field';\nconst should = a.should();\nchai.should();\nbefore('set test args', () => {\n    const validFieldConfig = { bombs: 9, width: 9, height: 9 };\n    const invalidFieldConfig = { bombs: 27, width: 5, height: 5 };\n    const validPos = { x: 0, y: 0 };\n    const invalidPos = { x: -1, y: -1 };\n    const initialField = Field.getInitialField(validFieldConfig);\n    const emptyField = Field.getEmptyField(validFieldConfig);\n    describe('Field', () => {\n        describe('getEmptyField', () => {\n            emptyField.should.be.an('array');\n            it.skip('should have no bombs', () => {\n                let bombs = 0;\n                Field.allPositions(emptyField).map(p => p.isBomb ? bombs++ : bombs);\n                bombs.should.be.equal(0);\n            });\n            it('should field size match fieldConfig size', () => {\n                emptyField.length.should.be.equal(validFieldConfig.width);\n                emptyField[0].length.should.be.equal(validFieldConfig.height);\n            });\n        });\n        describe('getBombedField', () => {\n            const bombedField = Field.getBombedField(emptyField, validFieldConfig);\n            bombedField.should.be.an('array');\n            it('should match bombs in the field with fieldConfig bombs', () => {\n                let bombs = 0;\n                Field.allPositions(bombedField).map(p => p.isBomb ? bombs++ : bombs);\n                bombs.should.be.equal(validFieldConfig.bombs);\n            });\n            it('should throw an error if bombs number is bigger than fild size', () => {\n                try {\n                    const invalidField = Field.getInitialField(invalidFieldConfig);\n                    should.not.exist(invalidField);\n                }\n                catch (e) {\n                    e.should.be.an('error');\n                }\n            });\n        });\n        describe('countNearBombs', () => {\n            it('should increase near bombs', () => {\n                const countedField = Field.countNearBombs(initialField);\n                const flattenField = R.flatten(countedField);\n                const isBombeb = (pos) => pos.isBomb;\n                const bombedPos = R.find(isBombeb, flattenField);\n                const nearBombebPos = (pos) => Field.validNearPos(initialField, pos);\n                nearBombebPos(bombedPos).map(p => countedField[p.x][p.y].nearBombs.should.be.above(0));\n                countedField.should.be.an('array');\n            });\n        });\n        describe('openPosition', () => {\n            it('should return an immutable opened position', () => {\n                const closedPosition = Field.newPos(1, 1);\n                const marked1Position = Field.openPosition(closedPosition);\n                // tslint:disable-next-line:no-unused-expression\n                marked1Position.opened.should.be.true;\n                closedPosition.should.not.be.equal(marked1Position);\n            });\n        });\n        describe('nearPositions', () => {\n            it('should return near positions', () => {\n                const nearPos = Field.nearPositions(validPos);\n                nearPos.should.be.an('array');\n            });\n        });\n        describe('positionIsValid', () => {\n            it('should return true if position is valid', () => {\n                const isValid = Field.positionIsValid(initialField, validPos);\n                // tslint:disable-next-line:no-unused-expression\n                isValid.should.be.true;\n            });\n            it('should return false if position is invalid', () => {\n                const isValid = Field.positionIsValid(initialField, invalidPos);\n                // tslint:disable-next-line:no-unused-expression\n                isValid.should.be.false;\n            });\n        });\n        describe('validNearPositions', () => {\n            it('should return only valid near positions', () => {\n                const nearPos = Field.validNearPos(initialField, validPos);\n                const validateFn = (np) => np.map(Field.positionIsValid(initialField));\n                const validatedpos = validateFn(nearPos);\n                validatedpos.map(p => p.should.be.true);\n                nearPos.should.be.an('array');\n            });\n        });\n        describe('markPosition', () => {\n            const closedPosition = Field.newPos(-1, 1);\n            const marked1Position = Field.markPosition(closedPosition);\n            it('should return a marked as 1 position', () => {\n                marked1Position.marked.should.be.equal(1);\n            });\n            const marked2Position = Field.markPosition(marked1Position);\n            it('should return a marked as 2 position', () => {\n                marked2Position.marked.should.be.equal(2);\n            });\n            const marked3Position = Field.markPosition(marked2Position);\n            it('should return a unmarked position', () => {\n                marked3Position.marked.should.be.equal(0);\n            });\n        });\n    });\n});\n//# sourceMappingURL=Field.test.js.map"]}